<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘¨æœŸå¾‹åˆ†æ | Cosmic Neural Network v6.2</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Rajdhani:wght@300;500;700&family=Shippori+Mincho:wght@400;600&family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /* --- TOKENS --- */
        :root {
            --c-bg: #020205;
            --c-accent: #00f0ff;
            --c-accent-dim: rgba(0, 240, 255, 0.1);
            --c-card-bg: rgba(12, 18, 30, 0.9);
            --c-border: rgba(0, 240, 255, 0.25);
            --font-main: 'Noto Sans JP', sans-serif;
            --font-serif: 'Shippori Mincho', serif;
            --font-tech: 'Rajdhani', sans-serif;
        }

        * { box-sizing: border-box; }
        body { margin: 0; overflow: hidden; background-color: var(--c-bg); font-family: var(--font-main); color: #fff; }

        /* --- LAYOUT --- */
        #canvas-wrapper { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
        #app-layer { position: absolute; z-index: 10; width: 100%; height: 100%; display: flex; flex-direction: column; overflow: hidden; }

        /* --- HEADER --- */
        header { padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(to bottom, rgba(0,0,0,0.8), transparent); pointer-events: auto; }
        .brand h1 { font-family: var(--font-serif); font-size: 1.5rem; margin: 0; letter-spacing: 0.15em; background: linear-gradient(to right, #fff, #88ccee); -webkit-background-clip: text; color: transparent; }
        .nav-btn { background: rgba(0,0,0,0.5); border: 1px solid #334; color: #889; padding: 5px 15px; font-family: var(--font-tech); cursor: pointer; transition: 0.3s; }
        .nav-btn:hover { border-color: var(--c-accent); color: var(--c-accent); }

        /* --- INPUT PANEL --- */
        #input-container {
            position: absolute; top: 50%; right: 5%; transform: translateY(-50%);
            width: 340px; background: rgba(10, 15, 25, 0.9); backdrop-filter: blur(20px);
            border: 1px solid var(--c-accent-dim); border-left: 2px solid var(--c-accent);
            padding: 40px 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            transition: opacity 0.5s; pointer-events: auto;
        }
        .form-label { display: block; font-family: var(--font-tech); font-size: 0.7rem; color: #889; margin-bottom: 5px; letter-spacing: 0.15em; }
        .form-input { width: 100%; background: rgba(0,0,0,0.5); border: 1px solid #334; color: #fff; padding: 10px; font-family: var(--font-tech); font-size: 1.1rem; outline: none; margin-bottom: 20px; transition: 0.3s; }
        .form-input:focus { border-color: var(--c-accent); background: rgba(0, 20, 30, 0.8); }
        .submit-btn { width: 100%; padding: 15px; background: linear-gradient(90deg, transparent, var(--c-accent-dim), transparent); border: 1px solid var(--c-accent); color: var(--c-accent); font-family: 'Cinzel'; font-weight: 700; cursor: pointer; transition: 0.3s; letter-spacing: 0.2em; }
        .submit-btn:hover { background: var(--c-accent); color: #000; box-shadow: 0 0 30px var(--c-accent); }

        /* --- SYNCHRO OVERLAY --- */
        #synchro-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 50; pointer-events: none; opacity: 0; transition: opacity 0.5s;
        }
        .synchro-text { font-family: var(--font-tech); font-size: 2rem; color: var(--c-accent); letter-spacing: 0.5em; text-shadow: 0 0 20px var(--c-accent); }
        .synchro-sub { font-family: var(--font-serif); font-size: 0.9rem; color: #fff; margin-top: 10px; letter-spacing: 0.2em; opacity: 0.8; }

        /* --- RESULT PANEL --- */
        #result-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 3, 5, 0.95); z-index: 20;
            display: flex; flex-direction: column; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.8s;
            backdrop-filter: blur(10px);
        }
        #result-overlay.active { opacity: 1; pointer-events: auto; }

        .result-scroll { width: 100%; max-width: 1200px; height: 100%; overflow-y: auto; padding: 40px 20px 120px 20px; }
        .result-scroll::-webkit-scrollbar { width: 6px; }
        .result-scroll::-webkit-scrollbar-thumb { background: #334; border-radius: 3px; }

        /* DASHBOARD (Top) */
        .dashboard-box {
            border: 1px solid #334455; background: rgba(5, 10, 20, 0.6);
            border-radius: 8px; padding: 30px; margin-bottom: 40px;
        }
        .dash-title { font-size: 0.9rem; color: #8899aa; border-bottom: 1px solid #334; padding-bottom: 10px; margin-bottom: 20px; }
        .param-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; }
        .param-item { margin-bottom: 5px; }
        .param-head { display: flex; justify-content: space-between; font-size: 0.85rem; color: #fff; margin-bottom: 5px; }
        .param-bar-bg { width: 100%; height: 4px; background: #223; border-radius: 2px; overflow: hidden; }
        .param-bar-fill { height: 100%; background: var(--c-accent); width: 0%; transition: width 1.5s ease-out; box-shadow: 0 0 8px var(--c-accent); }
        .param-meta { font-family: var(--font-tech); font-size: 0.7rem; color: #667; margin-top: 3px; display: flex; justify-content: space-between; }

        /* STRATEGY TEXT (Summary) */
        .strategy-container {
            max-width: 900px; margin: 0 auto 50px auto;
            border-left: 4px solid var(--c-accent);
            background: linear-gradient(90deg, rgba(0,240,255,0.05), transparent);
            padding: 30px;
        }
        .strategy-title { font-family: var(--font-serif); font-size: 1.8rem; margin-bottom: 15px; color: #fff; text-shadow: 0 0 10px rgba(0,240,255,0.3); }
        .strategy-type { display: inline-block; font-family: var(--font-tech); color: var(--c-accent); border: 1px solid var(--c-accent); padding: 4px 12px; font-size: 0.8rem; letter-spacing: 0.1em; margin-bottom: 20px; }
        .strategy-body { font-size: 1.05rem; line-height: 1.9; color: #ddd; text-align: justify; white-space: pre-wrap; }

        /* 13 GRID (Bottom) */
        .grid-header { font-family: 'Cinzel'; text-align: center; color: #667; letter-spacing: 0.3em; margin: 40px 0 20px 0; border-top: 1px dashed #334; padding-top: 20px; }
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 15px; }
        .info-card {
            background: var(--c-card-bg); border: 1px solid var(--c-border);
            border-radius: 4px; padding: 25px; display: flex; flex-direction: column; gap: 12px;
            transition: transform 0.3s;
        }
        .info-card:hover { border-color: #fff; transform: translateY(-3px); }
        .card-head { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 8px; }
        .card-name { font-family: var(--font-serif); font-size: 1.1rem; color: #fff; font-weight: bold; }
        .card-tag { font-size: 0.7rem; background: #112; color: var(--c-accent); border: 1px solid var(--c-accent); padding: 2px 8px; border-radius: 10px; }
        .card-val { font-family: var(--font-tech); font-size: 1rem; color: #ccc; }
        .card-desc { font-size: 0.9rem; line-height: 1.7; color: #ddd; text-align: justify; }
        .card-adv { font-size: 0.85rem; color: #9ab; margin-top: auto; padding-top: 12px; border-top: 1px dashed #445; background: rgba(0,0,0,0.2); padding: 10px; border-radius: 4px; }
        .card-adv::before { content: "ğŸ’¡ ADVICE: "; color: var(--c-accent); font-weight: bold; font-family: var(--font-tech); }

        /* FOOTER */
        .action-bar {
            position: fixed; bottom: 0; left: 0; width: 100%; background: #05080c; border-top: 1px solid #334;
            padding: 15px; display: flex; justify-content: center; gap: 15px; z-index: 30;
        }
        .action-btn { background: transparent; border: 1px solid #556; color: #889; padding: 10px 30px; font-family: var(--font-tech); cursor: pointer; transition: 0.2s; }
        .action-btn:hover { border-color: var(--c-accent); color: var(--c-accent); }

        /* START SCREEN */
        #start-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; background: rgba(2,2,5,0.95); display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.8s; }
    </style>
</head>
<body>

    <div id="start-screen">
        <h1 style="font-family:'Shippori Mincho'; font-size:2.5rem; color:#fff;">å‘¨æœŸå¾‹åˆ†æ</h1>
        <p style="font-family:'Rajdhani'; letter-spacing:0.3em; color:var(--c-accent); margin-bottom:40px;">COSMIC NEURAL NETWORK v6.2</p>
        <button class="submit-btn" style="width:auto; padding:15px 50px;" onclick="app.init()">INITIALIZE SYSTEM</button>
    </div>

    <div id="canvas-wrapper"></div>

    <div id="app-layer">
        <header>
            <div class="brand"><h1>å‘¨æœŸå¾‹åˆ†æ</h1></div>
            <button class="nav-btn" onclick="app.audio.toggle()" id="btn-audio">AUDIO: ON</button>
        </header>

        <div id="input-container">
            <label class="form-label">Birth Date</label>
            <input type="date" id="inp-date" class="form-input" value="1995-08-08">
            <label class="form-label">Birth Time</label>
            <input type="time" id="inp-time" class="form-input" value="12:00">
            <label class="form-label">Location</label>
            <select id="inp-city" class="form-input"></select>
            <button class="submit-btn" onclick="app.startSequence()">START ANALYSIS</button>
        </div>

        <div id="synchro-overlay">
            <div class="synchro-text">TUNING...</div>
            <div class="synchro-sub">Aligning Vectors with Cosmic Cycles</div>
        </div>

        <div id="result-overlay">
            <div class="result-scroll" id="capture-target">
                
                <div class="dashboard-box">
                    <div class="dash-title">ã‚ãªãŸã®ç¾åœ¨ä½ç½® (ã‚µã‚¤ã‚¯ãƒ«é€²è¡Œåº¦ã‚¤ãƒ¡ãƒ¼ã‚¸)</div>
                    <div class="param-grid" id="param-grid"></div>
                </div>

                <div class="strategy-container">
                    <div class="strategy-title" id="st-title">ANALYZING...</div>
                    <div class="strategy-type" id="st-type">CALCULATING VECTOR</div>
                    <div class="strategy-body" id="st-body"></div>
                </div>

                <div class="grid-header">SOURCE CODE: 13 DIMENSIONS</div>
                <div class="grid-container" id="grid-container"></div>
            </div>

            <div class="action-bar">
                <button class="action-btn" onclick="app.export()">ğŸ“· SAVE IMAGE</button>
                <button class="action-btn" onclick="app.reset()">â†º RESET</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <script>
        /* --- DATA & LOGIC --- */
        const DICT = {
            kyusei: {
                "ä¸€ç™½æ°´æ˜Ÿ": { tag: "æ€è€ƒã®ã‚¹ã‚¿ã‚¤ãƒ«", desc: "æ°´ã®ã‚ˆã†ã«æŸ”è»Ÿã§ã€ã©ã‚“ãªå™¨ã«ã‚‚åˆã‚ã›ã‚‰ã‚Œã‚‹çŸ¥æ€§æ´¾ã€‚è¡¨é¢ã¯ç©ã‚„ã‹ã§ã™ãŒã€å†…é¢ã«ã¯å¼·ã„èŠ¯ã¨ç§˜å¯†ä¸»ç¾©çš„ãªä¸€é¢ã‚’æŒã¡ã¾ã™ã€‚", advice: "äººè„ˆãŒè³‡ç”£ã§ã™ã€‚è£æ–¹ã‚„å‚è¬€ã¨ã—ã¦ã®ãƒã‚¸ã‚·ãƒ§ãƒ³ã§ã€é™ã‹ã«å…¨ä½“ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹æˆ¦ç•¥ãŒæœ€ã‚‚æ©Ÿèƒ½ã—ã¾ã™ã€‚" },
                "äºŒé»’åœŸæ˜Ÿ": { tag: "è¡Œå‹•ã®åŸºç›¤", desc: "å¤§åœ°ã®ã‚ˆã†ãªåŒ…å®¹åŠ›ã¨ã€ç€å®Ÿãªè‚²æˆèƒ½åŠ›ã‚’æŒã¡ã¾ã™ã€‚æ´¾æ‰‹ã•ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€è£ä»˜ã‘ã®ã‚ã‚‹å®Ÿå‹™èƒ½åŠ›ã§å‘¨å›²ã‹ã‚‰çµ¶å¤§ãªä¿¡é ¼ã‚’å¾—ã¾ã™ã€‚", advice: "æ€¥æ¿€ãªå¤‰åŒ–ã‚ˆã‚Šã‚‚ã€Œç¶™ç¶šã€ãŒæ­¦å™¨ã«ãªã‚Šã¾ã™ã€‚æ—¢å­˜äº‹æ¥­ã®æ”¹å–„ã‚„ã€ãƒãƒ¼ãƒ ã®ãƒ¡ãƒ³ã‚¿ãƒ¼å½¹ã‚’è²·ã£ã¦å‡ºã¦ãã ã•ã„ã€‚" },
                "ä¸‰ç¢§æœ¨æ˜Ÿ": { tag: "åˆå‹•ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼", desc: "é›·ã®ã‚ˆã†ãªç¬ç™ºåŠ›ã¨ã€æ–°ã—ã„ã‚‚ã®å¥½ãã®ãƒ‘ã‚¤ã‚ªãƒ‹ã‚¢ç²¾ç¥ã‚’æŒã¡ã¾ã™ã€‚å£°ãŒå¤§ããã€ç™ºä¿¡åŠ›ãŒã‚ã‚Šã€ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚", advice: "ã‚¹ã‚¿ãƒ¼ãƒˆãƒ€ãƒƒã‚·ãƒ¥ã¯æœ€å¼·ã§ã™ãŒã€è©°ã‚ã®ç”˜ã•ã«æ³¨æ„ã€‚ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‡ºã—ãŸã‚‰ã€å®Ÿå‹™ã¯å¾—æ„ãªäººã«ä»»ã›ã‚‹åˆ†æ¥­ä½“åˆ¶ã‚’ã€‚" },
                "å››ç·‘æœ¨æ˜Ÿ": { tag: "èª¿æ•´åŠ›", desc: "é¢¨ã®ã‚ˆã†ã«è»½ã‚„ã‹ã§ã€äººã®ç¸ã‚’é‹ã¶ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚¿ãƒ¼ã€‚ä¿¡ç”¨ã¨èª¿å’Œã‚’é‡ã‚“ã˜ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ“ã‚¸ãƒã‚¹ã‚„ä»²ä»‹æ¥­ã§æ‰èƒ½ãŒé–‹èŠ±ã—ã¾ã™ã€‚", advice: "ã€Œæ–­ã‚Œãªã„ã€ãŒå¼±ç‚¹ã«ãªã‚ŠãŒã¡ã€‚å…«æ–¹ç¾äººã«ãªã‚‰ãšã€é‡è¦ãªãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼ˆå–å¼•å…ˆï¼‰ã‚’çµã‚Šè¾¼ã‚€å‹‡æ°—ã‚’æŒã£ã¦ãã ã•ã„ã€‚" },
                "äº”é»„åœŸæ˜Ÿ": { tag: "å¸ç‹ã®æ°—è³ª", desc: "è…æ•—ã¨å†ç”Ÿã‚’å¸ã‚‹ã€å¼·çƒˆãªã‚«ãƒªã‚¹ãƒæ€§ã€‚ã‚¼ãƒ­ã‹ã‚‰ã‚¤ãƒã‚’ç”Ÿã¿å‡ºã™åŠ›ã€ã‚ã‚‹ã„ã¯ã©ã‚“åº•ã‹ã‚‰é€™ã„ä¸ŠãŒã‚‹åŠ›ãŒãšã°æŠœã‘ã¦ã„ã¾ã™ã€‚", advice: "ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã§å‘¨å›²ã‚’å¼•ã£å¼µã‚‹ã¹ãã§ã™ã€‚ã‚ãªãŸã®è¿·ã„ã¯çµ„ç¹”ã®è¿·ã„ã«ãªã‚Šã¾ã™ã€‚ç‹¬å–„çš„ã«ãªã‚‰ã¬ã‚ˆã†ã€å‚è¬€ã‚’ä¸€äººç½®ã„ã¦ãã ã•ã„ã€‚" },
                "å…­ç™½é‡‘æ˜Ÿ": { tag: "æ±ºæ–­ã®ã‚¹ã‚¿ã‚¤ãƒ«", desc: "å¤©ï¼ˆå®‡å®™ï¼‰ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å®¿ã™ã€é«˜æ½”ãªãƒªãƒ¼ãƒ€ãƒ¼ã€‚å®Œç’§ä¸»ç¾©ã§è²¬ä»»æ„ŸãŒå¼·ãã€å¦¥å”ã‚’è¨±ã•ãªã„ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§ã™ã€‚", advice: "æ­£è«–ã¯äººã‚’å‚·ã¤ã‘ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚éƒ¨ä¸‹ã‚„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ã¯ã€ã‚ãªãŸã®7å‰²ã®å®Œæˆåº¦ã§OKã‚’å‡ºã™å¯›å®¹ã•ã‚’æŒã¤ã¨çµ„ç¹”ãŒå›ã‚Šã¾ã™ã€‚" },
                "ä¸ƒèµ¤é‡‘æ˜Ÿ": { tag: "çµŒæ¸ˆæ„Ÿè¦š", desc: "å–œã³ã¨åç©«ã®æ˜Ÿã€‚è©±è¡“ã«å„ªã‚Œã€äººã‚’æ¥½ã—ã¾ã›ãªãŒã‚‰ãŠé‡‘ã‚’å›ã™å¤©æ‰çš„ãªã‚»ãƒ³ã‚¹ã‚’æŒã¡ã¾ã™ã€‚é£²é£Ÿã‚„ã‚¨ãƒ³ã‚¿ãƒ¡ã«å¼·ã„é©æ€§ã€‚", advice: "ã€Œæ¥½ã—ã•ã€ã‚’åç›ŠåŒ–ã™ã‚‹ä»•çµ„ã¿ã‚’ä½œã£ã¦ãã ã•ã„ã€‚ãŸã ã—ã€å£ãŒç½ã„ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹ãŸã‚ã€å¥‘ç´„æ›¸å‘¨ã‚Šã¯æ…é‡ã«ã€‚" },
                "å…«ç™½åœŸæ˜Ÿ": { tag: "æ”¹é©åŠ›", desc: "é«˜ã„å±±ã®ã‚ˆã†ã«ã©ã£ã—ã‚Šæ§‹ãˆã€å‹•ãã¹ãæ™‚ã«å‹•ãæ”¹é©è€…ã€‚ç¾çŠ¶ç¶­æŒã‚’è‰¯ã—ã¨ã›ãšã€ç¶™æ‰¿ã¨é©æ–°ã‚’åŒæ™‚ã«è¡Œã†å½¹å‰²ãŒã‚ã‚Šã¾ã™ã€‚", advice: "å‹•ãã¾ã§ã®è…°ã¯é‡ã„ã§ã™ãŒã€ä¸€åº¦æ±ºã‚ãŸã‚‰æ­¢ã¾ã‚Šã¾ã›ã‚“ã€‚äº‹æ¥­æ‰¿ç¶™ã‚„ã€çµ„ç¹”ã®å†ç·¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æœ¬é ˜ã‚’ç™ºæ®ã—ã¾ã™ã€‚" },
                "ä¹ç´«ç«æ˜Ÿ": { tag: "å…ˆè¦‹æ€§", desc: "å¤ªé™½ã®ã‚ˆã†ã«æ˜ã‚‹ãã€å…¨ã¦ã‚’æ˜ã‚‰ã‹ã«ã™ã‚‹æƒ…ç†±å®¶ã€‚ç›´æ„ŸåŠ›ã¨ç¾çš„ã‚»ãƒ³ã‚¹ã«å„ªã‚Œã€æ™‚ä»£ã®å…ˆã‚’èª­ã‚€èƒ½åŠ›ãŒã‚ã‚Šã¾ã™ã€‚", advice: "ç†±ã—ã‚„ã™ãå†·ã‚ã‚„ã™ã„ç‚¹ãŒãƒªã‚¹ã‚¯ã€‚çŸ­æœŸæ±ºæˆ¦å‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã€ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«é‡è¦–ã®ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æˆ¦ç•¥ã«æ³¨åŠ›ã—ã¦ãã ã•ã„ã€‚" }
            },
            jukkan: {
                "ç”²(æœ¨)": { tag: "æœ¬è³ªID", desc: "å¤§æ¨¹ã€‚ä¸€æœ¬æ°—ã§å‘ä¸Šå¿ƒãŒå¼·ã„ã€‚æ›²ãŒã£ãŸã“ã¨ãŒå«Œã„ãªãƒªãƒ¼ãƒ€ãƒ¼æ°—è³ªã€‚", advice: "æŒ«æŠ˜ã«è„†ã„ã®ã§ã€æŸ”è»Ÿæ€§ã‚’æŒã¤ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨çµ„ã‚€ã“ã¨ã€‚" },
                "ä¹™(æœ¨)": { tag: "æœ¬è³ªID", desc: "è‰èŠ±ã€‚ç’°å¢ƒé©å¿œåŠ›ãŒé«˜ãã€ç²˜ã‚Šå¼·ã„äº¤æ¸‰äººã€‚ã©ã“ã§ã‚‚æ ¹ã‚’å¼µã‚Œã‚‹ã€‚", advice: "å˜ç‹¬ã‚ˆã‚Šçµ„ç¹”ã®åŠ›ã‚’ä½¿ã£ã¦ãã ã•ã„ã€‚" },
                "ä¸™(ç«)": { tag: "æœ¬è³ªID", desc: "å¤ªé™½ã€‚è£è¡¨ãŒãªãã€ãã“ã«ã„ã‚‹ã ã‘ã§ä¸­å¿ƒã«ãªã‚‹ã‚«ãƒªã‚¹ãƒã€‚", advice: "æ°—åˆ†ã®ãƒ ãƒ©ã‚’ä»•äº‹ã«å‡ºã•ãªã„ã“ã¨ãŒä¿¡é ¼ã®éµã€‚" },
                "ä¸(ç«)": { tag: "æœ¬è³ªID", desc: "ç¯ç«ã€‚æ´å¯ŸåŠ›ãŒé‹­ãã€å†…é¢ã«æƒ…ç†±ã‚’ç§˜ã‚ã‚‹å‚è¬€ã‚¿ã‚¤ãƒ—ã€‚", advice: "çˆ†ç™ºã™ã‚‹å‰ã«å°å‡ºã—ã«ã‚¬ã‚¹æŠœãã‚’ã€‚" },
                "æˆŠ(åœŸ)": { tag: "æœ¬è³ªID", desc: "å±±å²³ã€‚å‹•ã˜ãªã„åŒ…å®¹åŠ›ã€‚ä¿¡é ¼ã¨ä¿¡ç”¨ã®å¡Šã§ã€äººãŒé›†ã¾ã‚‹ã€‚", advice: "ãƒ•ãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®é‡ã•ãŒæ©Ÿä¼šæå¤±ã«ãªã‚‰ã¬ã‚ˆã†æ³¨æ„ã€‚" },
                "å·±(åœŸ)": { tag: "æœ¬è³ªID", desc: "ç”°ç•‘ã€‚äººã‚’è‚²ã¦ã€å®Ÿã‚Šã‚’ã‚‚ãŸã‚‰ã™è‚²æˆè€…ã€‚æ•™è‚²äº‹æ¥­ã«é©æ€§ã€‚", advice: "å™¨ç”¨è²§ä¹ã«ãªã‚‰ã¬ã‚ˆã†å°‚é–€æ€§ã‚’æŒã¤ã“ã¨ã€‚" },
                "åºš(é‡‘)": { tag: "æœ¬è³ªID", desc: "é‹¼é‰„ã€‚æ”»æ’ƒåŠ›ã¨æ”¹é©åŠ›ã«å„ªã‚Œã‚‹æ­¦é—˜æ´¾ã€‚æ–§ã®ã‚ˆã†ã«åˆ‡ã‚Šæ‹“ãã€‚", advice: "å©ã‹ã‚Œã¦å¼·ããªã‚‹ã€‚è©¦ç·´ã‚’æ­“è¿ã›ã‚ˆã€‚" },
                "è¾›(é‡‘)": { tag: "æœ¬è³ªID", desc: "å®çŸ³ã€‚ç¹Šç´°ã§ç¾æ„è­˜ãŒé«˜ã„ã€‚ç‰¹åˆ¥æ‰±ã„ã•ã‚Œã‚‹ã“ã¨ã§è¼ãã€‚", advice: "ç£¨ã‹ã‚Œãªã„ã¨è¼ã‹ãªã„ã€‚è‹¦åŠ´ã¯ç ”ç£¨å‰¤ã¨æ€ã†ã“ã¨ã€‚" },
                "å£¬(æ°´)": { tag: "æœ¬è³ªID", desc: "å¤§æµ·ã€‚ã‚¹ã‚±ãƒ¼ãƒ«ãŒå¤§ããã€æµå‹•çš„ã§è‡ªç”±ã€‚æµ·å¤–ã¨ã®ç¸ã€‚", advice: "ç›®æ¨™ãŒãªã„ã¨æ°¾æ¿«ã™ã‚‹ã€‚å ¤é˜²ï¼ˆãƒ«ãƒ¼ãƒ«ï¼‰ã‚’è¨­ã‘ã‚‹ã“ã¨ã€‚" },
                "ç™¸(æ°´)": { tag: "æœ¬è³ªID", desc: "é›¨éœ²ã€‚æ…ˆæ„›ã«æº€ã¡ã€éš…ã€…ã¾ã§è¡Œãæ¸¡ã‚‹çŸ¥æ€§ã€‚ä¼ç”»åŠ›ãŒã‚ã‚‹ã€‚", advice: "å¿è€å¼·ã„ãŒã€ç©ã‚‚ã‚Šç©ã‚‚ã£ã¦æ±ºå£Šã›ã¬ã‚ˆã†ã€‚" }
            }
        };

        const CITIES = [
            {name:"Tokyo", tz:9}, {name:"New York", tz:-5}, {name:"London", tz:0}, {name:"Paris", tz:1}
        ];

        const CYCLES = [
            { name: "æœ¨æ˜Ÿ (Jupiter)", days: 4333, color: "#D4AF37" },
            { name: "åœŸæ˜Ÿ (Saturn)", days: 10759, color: "#A9A9A9" },
            { name: "ç«æ˜Ÿ (Mars)", days: 780, color: "#FF4500" },
            { name: "é‡‘æ˜Ÿ (Venus)", days: 584, color: "#FF69B4" },
            { name: "æœˆç›¸ (Moon)", days: 29.53, color: "#F0F8FF" },
            { name: "æ­³å·® (Precession)", days: 9414075, color: "#8A2BE2" }
        ];

        /* --- VISUAL ENGINE (Classic 5 Orbits & Deep Stars) --- */
        class VisualEngine {
            constructor() {
                this.scene = new THREE.Scene();
                this.scene.fog = new THREE.FogExp2(0x020205, 0.0015); // Deep fog
                this.camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 3000);
                this.camera.position.set(0, 30, 50);
                this.camera.lookAt(0, 0, 0);
                
                this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setPixelRatio(window.devicePixelRatio);
                document.getElementById('canvas-wrapper').appendChild(this.renderer.domElement);

                this.initScene();
                this.animate();
            }

            initScene() {
                // 1. Core: Buckyball (Icosahedron Wireframe)
                const geo = new THREE.IcosahedronGeometry(2.5, 1);
                const mat = new THREE.MeshBasicMaterial({ color: 0x00f0ff, wireframe: true, transparent:true, opacity:0.6 });
                this.core = new THREE.Mesh(geo, mat);
                this.scene.add(this.core);

                // 2. Stars: Increased Count for Depth
                const sGeo = new THREE.BufferGeometry();
                const sCount = 12000; // Increased
                const sPos = new Float32Array(sCount * 3);
                for(let i=0; i<sCount*3; i++) sPos[i] = (Math.random()-0.5) * 1500;
                sGeo.setAttribute('position', new THREE.BufferAttribute(sPos, 3));
                const sMat = new THREE.PointsMaterial({color:0xaaccff, size:0.8, transparent:true, opacity:0.8, sizeAttenuation:true});
                this.stars = new THREE.Points(sGeo, sMat);
                this.scene.add(this.stars);

                // 3. Planets (Classic 5, Wireframe)
                this.planets = [];
                const pData = [
                    {r:8, s:0.5, sp:0.008},
                    {r:12, s:0.6, sp:0.006},
                    {r:16, s:0.4, sp:0.005},
                    {r:24, s:0.8, sp:0.002},
                    {r:32, s:0.7, sp:0.0015}
                ];
                pData.forEach(p => {
                    const ring = new THREE.Mesh(new THREE.RingGeometry(p.r, p.r+0.05, 128), new THREE.MeshBasicMaterial({color:0x445566, side:THREE.DoubleSide, opacity:0.2, transparent:true}));
                    ring.rotation.x = Math.PI/2;
                    this.scene.add(ring);
                    
                    const pivot = new THREE.Group();
                    const mesh = new THREE.Mesh(new THREE.IcosahedronGeometry(p.s, 1), new THREE.MeshBasicMaterial({color:0x00f0ff, wireframe:true}));
                    mesh.position.x = p.r;
                    pivot.add(mesh);
                    
                    pivot.rotation.y = Math.random() * Math.PI * 2;
                    this.scene.add(pivot);
                    this.planets.push({pivot, mesh, speed:p.sp});
                });
            }

            animate() {
                requestAnimationFrame(this.animate.bind(this));
                if(!app.isTuning) {
                    this.core.rotation.y += 0.002;
                    this.core.rotation.x += 0.001;
                    this.stars.rotation.y += 0.0003;
                } else {
                    this.core.rotation.y += 0.1;
                    this.core.rotation.x += 0.05;
                    this.stars.rotation.y += 0.002;
                }
                this.planets.forEach(p => p.pivot.rotation.y += p.speed);
                this.renderer.render(this.scene, this.camera);
            }
        }

        /* --- LOGIC & APP --- */
        const Astro = {
            getKyusei: y => {
                let s = 0; String(y).split('').forEach(n=>s+=parseInt(n));
                while(s>9) s=String(s).split('').reduce((a,b)=>parseInt(a)+parseInt(b),0);
                let st = 11-s; if(st>9) st-=9; if(st===0) st=9;
                return ["ä¸€ç™½æ°´æ˜Ÿ","äºŒé»’åœŸæ˜Ÿ","ä¸‰ç¢§æœ¨æ˜Ÿ","å››ç·‘æœ¨æ˜Ÿ","äº”é»„åœŸæ˜Ÿ","å…­ç™½é‡‘æ˜Ÿ","ä¸ƒèµ¤é‡‘æ˜Ÿ","å…«ç™½åœŸæ˜Ÿ","ä¹ç´«ç«æ˜Ÿ"][st-1];
            },
            getJukkan: y => ["åºš(é‡‘)","è¾›(é‡‘)","å£¬(æ°´)","ç™¸(æ°´)","ç”²(æœ¨)","ä¹™(æœ¨)","ä¸™(ç«)","ä¸(ç«)","æˆŠ(åœŸ)","å·±(åœŸ)"][y%10],
            getStats: (bd, days) => {
                const diff = (new Date() - bd)/(1000*60*60*24);
                return { prog: Math.floor((diff%days)/days*100), cycle: Math.floor(diff/days)+1 };
            }
        };

        const app = {
            visual: null, isTuning: false,
            init: function() {
                document.getElementById('start-screen').style.opacity = 0;
                setTimeout(()=>document.getElementById('start-screen').style.display='none', 800);
                this.visual = new VisualEngine();
                app.audio.init();
                const sel = document.getElementById('inp-city');
                CITIES.forEach(c => {
                    let o = document.createElement('option');
                    o.text = c.name; o.value = JSON.stringify(c); sel.add(o);
                });
            },
            
            audio: {
                ctx: null, mute: false,
                init: function() {
                    const AC = window.AudioContext || window.webkitAudioContext;
                    this.ctx = new AC();
                    this.osc = this.ctx.createOscillator(); this.g = this.ctx.createGain();
                    this.osc.connect(this.g); this.g.connect(this.ctx.destination);
                    this.osc.frequency.value = 55; this.g.gain.value = 0.05; this.osc.start();
                },
                toggle: function() {
                    this.mute = !this.mute;
                    if(this.ctx) this.g.gain.setTargetAtTime(this.mute?0:0.05, this.ctx.currentTime, 0.1);
                    document.getElementById('btn-audio').innerText = this.mute?"AUDIO: OFF":"AUDIO: ON";
                },
                ramp: function() { if(!this.ctx || this.mute) return; this.osc.frequency.linearRampToValueAtTime(110, this.ctx.currentTime + 3); },
                reset: function() { if(!this.ctx || this.mute) return; this.osc.frequency.linearRampToValueAtTime(55, this.ctx.currentTime + 1); }
            },

            startSequence: function() {
                const date = document.getElementById('inp-date').value;
                if(!date) return;
                document.getElementById('input-container').style.opacity = 0;
                document.getElementById('input-container').style.pointerEvents = 'none';
                this.isTuning = true;
                this.audio.ramp();
                document.getElementById('synchro-overlay').style.opacity = 1;
                setTimeout(() => { this.analyze(date); }, 3000);
            },

            analyze: function(dateStr) {
                const bd = new Date(dateStr);
                const kyusei = Astro.getKyusei(bd.getFullYear());
                const jukkan = Astro.getJukkan(bd.getFullYear());
                const kData = DICT.kyusei[kyusei];
                const jData = DICT.jukkan[jukkan];

                // 1. DASHBOARD
                const pGrid = document.getElementById('param-grid');
                pGrid.innerHTML = "";
                CYCLES.forEach(c => {
                    const s = Astro.getStats(bd, c.days);
                    pGrid.innerHTML += `
                        <div class="param-item">
                            <div class="param-head"><span style="color:${c.color}">â— ${c.name}</span><span>${s.prog}%</span></div>
                            <div class="param-bar-bg"><div class="param-bar-fill" style="width:${s.prog}%; background:${c.color}"></div></div>
                            <div class="param-meta"><span>Cycle #${s.cycle}</span><span>${Math.floor(c.days)} days</span></div>
                        </div>`;
                });

                // 2. STRATEGY TEXT GENERATION
                const y = bd.getFullYear();
                const lastDigit = y % 10;
                let strategy = {};
                
                if([6,7].includes(lastDigit)) { // FIRE
                    strategy = {
                        title: "ç ´å£Šã¨å†ç”Ÿã®ãƒ¯ãƒ«ãƒ„", type: "MUTATION (å¤‰ç•°)", color: "#9D00FF",
                        body: `ã‚ãªãŸã®æœ¬è³ªã§ã‚ã‚‹ã€Œç«ï¼ˆ${jukkan}ãƒ»${kyusei}ï¼‰ã€ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ã€ç¾åœ¨é–‹ã„ã¦ã„ã‚‹ãƒ©ã‚¤ã‚ªãƒ³ã‚ºã‚²ãƒ¼ãƒˆã®å®‡å®™ç·šãŒå…±é³´ã—ã€é€šå¸¸ã§ã¯ã‚ã‚Šå¾—ãªã„åŒ–å­¦åå¿œã‚’èµ·ã“ã—ã¦ã„ã¾ã™ã€‚\n\nä»Šã¯ãƒ­ã‚¸ãƒƒã‚¯ã‚ˆã‚Šã‚‚ã€Œé•å’Œæ„Ÿã€ã‚’ä¿¡ã˜ã¦ãã ã•ã„ã€‚æ—¢å­˜ã®ãƒ¬ãƒ¼ãƒ«ã‚’ç ´å£Šã—ã€æ–°ã—ã„è»Œé“ã‚’æ•·ãã¹ãã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã™ã€‚ç ´å£Šã¯ææ€–ã§ã¯ãªãã€é€²åŒ–ã®ãŸã‚ã®ç¥ç¥­ã§ã™ã€‚`
                    };
                } else if([0,1,8,9].includes(lastDigit)) { // METAL/EARTH
                    strategy = {
                        title: "è©¦ç·´ã®å©å  (The Crucible)", type: "CONFLICT (è‘›è—¤)", color: "#ff3366",
                        body: `æ‹¡å¤§ã—ã‚ˆã†ã¨ã™ã‚‹æœ¨æ˜Ÿã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨ã€å›ºã‚ã‚ˆã†ã¨ã™ã‚‹ã‚ãªãŸã®æ€§è³ªï¼ˆ${jukkan}ï¼‰ãŒæ‘©æ“¦ã‚’èµ·ã“ã—ã¦ã„ã¾ã™ã€‚\n\nã“ã‚Œã¯æ•…éšœã§ã¯ãªãã€Œé›é€ ã€ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚ä»Šã¯å¤–ã«å‡ºã‚‹ã‚ˆã‚Šã‚‚ã€å†…éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã®åˆ·æ–°ï¼ˆå­¦ç¿’ãƒ»çµ„ç¹”åŒ–ãƒ»å¥‘ç´„ã®è¦‹ç›´ã—ï¼‰ã«ãƒªã‚½ãƒ¼ã‚¹ã‚’é›†ä¸­ã—ã¦ãã ã•ã„ã€‚ã“ã®æ™‚æœŸã«è“„ãˆãŸåŠ›ã¯ã€åŠå¹´å¾Œã«çˆ†ç™ºçš„ãªåˆ©ç›Šã‚’ç”Ÿã¿ã¾ã™ã€‚`
                    };
                } else { // WOOD/WATER
                    strategy = {
                        title: "å®Œå…¨ãªã‚‹è¿½ã„é¢¨", type: "SYNERGY (è¦šé†’)", color: "#D4AF37",
                        body: `å…¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒå™›ã¿åˆã£ã¦ã„ã¾ã™ã€‚æ°´ï¼ˆçŸ¥æ€§ï¼‰ãŒæœ¨ï¼ˆã‚ãªãŸï¼‰ã‚’è‚²ã¦ã€é¢¨ï¼ˆæ™‚ä»£ï¼‰ãŒãã‚Œã‚’é‹ã¶ã€å®Œç’§ãªå¾ªç’°ã«å…¥ã‚Šã¾ã—ãŸã€‚\n\nã‚ãªãŸãŒæ”¾ã¤çŸ¢ã¯ã€é¢¨ã«ä¹—ã£ã¦æƒ³å®šä»¥ä¸Šã®è·é›¢ã¸å±Šãã¾ã™ã€‚é æ…®ã¯ç½ªã§ã™ã€‚ä»Šã¾ã§æ¸©ã‚ã¦ããŸè¨ˆç”»ã‚’ã€ä»Šã™ãå®Ÿè¡Œã«ç§»ã—ã¦ãã ã•ã„ã€‚å¤±æ•—ã¨ã„ã†æ¦‚å¿µãŒä¸€æ™‚çš„ã«æ¶ˆå¤±ã—ã¦ã„ã¾ã™ã€‚`
                    };
                }

                document.getElementById('st-title').innerText = strategy.title;
                document.getElementById('st-type').innerText = strategy.type;
                document.getElementById('st-type').style.color = strategy.color;
                document.getElementById('st-type').style.borderColor = strategy.color;
                document.getElementById('st-body').innerText = strategy.body;
                document.querySelector('.strategy-container').style.borderLeftColor = strategy.color;

                // 3. 13 GRID
                const grid = document.getElementById('grid-container');
                grid.innerHTML = "";
                const items = [
                    {t:"ä¹æ˜Ÿæ°—å­¦", v:kyusei, ...kData},
                    {t:"åå¹²åäºŒæ”¯", v:jukkan, ...jData},
                    {t:"æœ¨æ˜Ÿä½ç½®", v:"åŒå­åº§", tag:"æ‹¡å¤§ã®ãƒ†ãƒ¼ãƒ", desc:"æƒ…å ±ã¨ç§»å‹•ã®é ˜åŸŸã§ã®ç™ºå±•ã€‚æµ…ãåºƒãç¨®ã‚’ã¾ãæ™‚æœŸã€‚", advice:"ãƒãƒ«ãƒã‚¿ã‚¹ã‚¯æ¨å¥¨ã€‚ä¸€ã¤ã®å ´æ‰€ã«ç•™ã¾ã‚‰ãªã„ã“ã¨ã€‚"},
                    {t:"åœŸæ˜Ÿä½ç½®", v:"é­šåº§", tag:"è©¦ç·´ã¨èª²é¡Œ", desc:"ç²¾ç¥çš„åŸºç›¤ã®å†æ§‹ç¯‰ã€‚è¦‹ãªã„ãµã‚Šã‚’ã—ã¦ããŸå•é¡Œã®æµ®ä¸Šã€‚", advice:"å†…çœã®æ™‚é–“ã‚’ç¢ºä¿ã—ã€éå»ã®ç²¾ç®—ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚"},
                    {t:"ç«æ˜Ÿ", v:"Active", tag:"æƒ…ç†±ã®æ‰€åœ¨", desc:"è‡ªå·±è¡¨ç¾ã¸ã®æ¬²æ±‚ãŒé«˜ã¾ã£ã¦ã„ã¾ã™ã€‚ãƒ‰ãƒ©ãƒãƒ†ã‚£ãƒƒã‚¯ãªå±•é–‹ã‚’å¥½ã‚€é…ç½®ã€‚", advice:"æ€’ã‚Šã‚„è¡å‹•ã‚’ã€ä½œå“ã‚„ä¼ç”»ã¨ã„ã†å½¢ã«æ˜‡è¯ã•ã›ã¦ãã ã•ã„ã€‚"},
                    {t:"é‡‘æ˜Ÿ", v:"8å¹´å‘¨æœŸ", tag:"ä¾¡å€¤è¦³", desc:"é‡‘èãƒ»ç¾æ„è­˜ã®å†è©•ä¾¡ã€‚8å¹´å‰ã®å‡ºæ¥äº‹ãŒå½¢ã‚’å¤‰ãˆã¦å†æ¥ã—ã¾ã™ã€‚", advice:"éå»ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¾ä»£ç‰ˆã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦å†åˆ©ç”¨ã‚’ã€‚"},
                    {t:"æœˆç›¸", v:"29.5æ—¥", tag:"æ„Ÿæƒ…ãƒªã‚ºãƒ ", desc:"å†…é¢çš„ãªãƒã‚¤ã‚ªãƒªã‚ºãƒ ã€‚æ½®ã®æº€ã¡å¼•ãã®ã‚ˆã†ã«ä»Šã¯å¼•ãæ™‚æœŸã€‚", advice:"ç›´æ„Ÿã«å¾“ã„ã€ç„¡ç†ãªã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’é¿ã‘ã¦ãã ã•ã„ã€‚"},
                    {t:"ãƒ©ã‚¤ã‚ªãƒ³ã‚ºã‚²ãƒ¼ãƒˆ", v:"Open", tag:"å®‡å®™ç·š", desc:"ã‚·ãƒªã‚¦ã‚¹ã‹ã‚‰ã®é«˜æ¬¡ã‚¨ãƒãƒ«ã‚®ãƒ¼æµå…¥ã€‚è¦šé†’ã¨æ··ä¹±ãŒåŒæ™‚ã«èµ·ãã¾ã™ã€‚", advice:"ä½“èª¿ä¸è‰¯ã¯å¥½è»¢åå¿œã€‚å¤‰åŒ–ã‚’æã‚Œãšå—ã‘å…¥ã‚Œã¦ã€‚"},
                    {t:"æ­³å·®é‹å‹•", v:"æ°´ç“¶åº§", tag:"æ–‡æ˜ã®æ½®æµ", desc:"2000å¹´å˜ä½ã®æ–‡æ˜ã‚·ãƒ•ãƒˆã€‚è‡ªå¾‹åˆ†æ•£å‹ç¤¾ä¼šã¸ã®ç§»è¡Œã€‚", advice:"å¤ã„æ¨©å¨ã«é ¼ã‚‰ãšã€å€‹ã¨ã—ã¦ã®ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ç¢ºç«‹ã—ã¦ãã ã•ã„ã€‚"},
                    {t:"åº§æ¨™", v:dateStr, tag:"åŸç‚¹", desc:"ã‚ãªãŸã®ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ™‚é–“åº§æ¨™IDã€‚", advice:"å…¨ã¦ã®é‹å‘½ã¯ã“ã®ä¸€ç‚¹ã‹ã‚‰å§‹ã¾ã‚Šã¾ã™ã€‚"},
                    {t:"ä¸‰å…ƒä¹é‹", v:"ç¬¬ä¹é‹", tag:"æ™‚ä»£ã®é‹æ°—", desc:"ç«ã®æ™‚ä»£ã€‚ç²¾ç¥æ€§ã¨ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã®èåˆã€‚", advice:"ã€Œå¯è¦–åŒ–ã€ã¨ã€ŒçŸ¥ã®å…±æœ‰ã€ãŒæˆåŠŸã®éµã§ã™ã€‚"},
                    {t:"å…«å¦", v:"éœ‡", tag:"è¡Œå‹•æŒ‡é‡", desc:"é›·ã®ã‚ˆã†ãªç¬ç™ºåŠ›ã€‚è¿·ã£ãŸã‚‰å‹•ãã€‚", advice:"å³æ–­å³æ±ºã€‚èµ°ã‚ŠãªãŒã‚‰è€ƒãˆã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã§ã€‚"},
                    {t:"Gã‚³ãƒ³ã‚¸ãƒ£ãƒ³ã‚¯ã‚·ãƒ§ãƒ³", v:"é¢¨", tag:"å¤‰é©", desc:"ç‰©è³ªã‹ã‚‰æƒ…å ±ã¸ã€‚æ‰€æœ‰ã‹ã‚‰å…±æœ‰ã¸ã€‚", advice:"ã‚·ã‚§ã‚¢ã™ã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚"}
                ];
                
                items.forEach(i => {
                    grid.innerHTML += `
                        <div class="info-card">
                            <div class="card-head">
                                <span class="card-name">${i.t}</span>
                                <span class="card-tag" style="border-color:var(--c-accent); color:var(--c-accent)">${i.tag}</span>
                            </div>
                            <div class="card-val">${i.v}</div>
                            <div class="card-desc">${i.desc}</div>
                            <div class="card-adv">${i.advice}</div>
                        </div>`;
                });

                // Transition
                this.isTuning = false;
                this.audio.reset();
                document.getElementById('synchro-overlay').style.opacity = 0;
                document.getElementById('result-overlay').classList.add('active');
            },

            reset: function() {
                document.getElementById('result-overlay').classList.remove('active');
                document.getElementById('input-container').style.opacity = 1;
                document.getElementById('input-container').style.pointerEvents = 'auto';
            },
            export: function() {
                html2canvas(document.getElementById('capture-target'), {backgroundColor:'#020305'}).then(c => {
                    const a = document.createElement('a'); a.href=c.toDataURL(); a.download='chart.png'; a.click();
                });
            }
        };
    </script>
</body>
</html>
